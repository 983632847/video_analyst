test:
  track:
    exp_name: "siamfcpp_alexnet"
    exp_save: "logs"
    model:
      backbone:
        name: "AlexNet"
        AlexNet:
          pretrain_model_path: ""
      losses:
        names: []
      task_head:
        name: "DenseboxHead"
        DenseboxHead:
          total_stride: 8
          score_size: 17
          x_size: 303
          num_conv3x3: 3
          head_conv_bn: [False, False, True]
      task_model:
        name: "SiamTrack"
        SiamTrack:
          # pretrain_model_path: "models/siamfcpp/siamfcpp-alexnet-vot-md5_18fd31a2f94b0296c08fff9b0f9ad240.pkl"
          pretrain_model_path: "snapshots/default_training/epoch-18.pkl"
    pipeline:
      name: "SiamFCppTracker"
      SiamFCppTracker:
        test_lr: 0.52
        window_influence: 0.21
        penalty_k: 0.04
        num_conv3x3: 3
    tester:
      names: ["VOTTester",]
      VOTTester:
        device_num: 1
        dataset_names: ["VOT2018"]
train:
  track:
    exp_name: "siamfcpp_alexnet-trn"
    exp_save: "logs"
    model:
      backbone:
        name: "AlexNet"
        AlexNet:
          pretrain_model_path: "models/alexnet/alexnet-nopad-bn.pkl"
      losses:
        names: ["SigmoidCrossEntropyRetina",
                "SigmoidCrossEntropyCenterness",
                "IOULoss",]
        SigmoidCrossEntropyRetina:
          name: "cls"
          weight: 1.0
          alpha: 0.25
          gamma: 2.0
        SigmoidCrossEntropyCenterness:
          name: "ctr"
          weight: 1.0
        IOULoss:
          name: "reg"
          weight: 3.0
      task_head:
        name: "DenseboxHead"
        DenseboxHead:
          total_stride: 8
          score_size: 17
          x_size: 303
          num_conv3x3: 3
          head_conv_bn: [False, False, True]
      task_model:
        name: "SiamTrack"
        SiamTrack:
          pretrain_model_path: ""
    data:
      num_epochs: 20
      minibatch: 32
      num_workers: 32
      nr_image_per_epoch: 600000
      datapipeline:
        name: "RegularDatapipeline"
      sampler:
        name: "TrackPairSampler"
        TrackPairSampler:
          negative_pair_ratio: 0.1
        submodules:
          dataset:
            names: ["GOT10kDataset",]
            GOT10kDataset:
              ratio: 1
              max_diff: 100
              dataset_root: "datasets/GOT-10k"
              subset: "train"
          filter:
            name: "TrackPairFilter"
            TrackPairFilter:
              max_area_rate: 0.6
              min_area_rate: 0.001
              max_ratio: 10
      transformer:
        names: ["RandomCropTransformer", ]
        RandomCropTransformer:
          max_scale: 0.3
          max_shift: 0.4
          x_size: 303
      target:
        name: "DenseboxTarget"
        DenseboxTarget:
          total_stride: 8
          score_size: 17
          x_size: 303
          num_conv3x3: 3
    trainer:
      name: "RegularTrainer"
      RegularTrainer:
#        devices: ["cuda"]
        devices: ["cuda:0", "cuda:1"]
        # devices: ["cuda:0", "cuda:1", "cuda:2", "cuda:3"]
        max_epoch: 20
        num_iterations: 12500
    optim:
      optimizer:
        name: "SGD"
        SGD:
          lr: 0.01
          momentum: 0.9
          weight_decay: 0.00005
      scheduler:
        name: "LRScheduler"
        LRScheduler:
          lr_policy:
          - >
            {
            "name": "LinearLR",
            "start_lr": 0.000001,
            "end_lr": 0.02,
            "max_epoch": 1,
            "max_iter": 12500
            }
          - >
            {
            "name": "CosineLR",
            "start_lr": 0.02,
            "end_lr": 0.000001,
            "max_epoch": 19,
            "max_iter": 12500
            }
          lr_multiplier:
          - >
            {
            "name": "backbone",
            "regex": "basemodel",
            "ratio": 0.1
            }
          - >
            {
            "name": "other",
            "regex": "^((?!basemodel).)*$",
            "ratio": 1
            }



#      freeze_scheduler:
#        isConv:
#          regex: "conv.\\.conv.*"
#          epoch: 0
#          freezed: True
#        isConv5:
#          regex: "conv5\\.conv.*"
#          epoch: 5
#          freezed: False
#        isConv4:
#          regex: "conv4\\.conv.*"
#          epoch: 10
#          freezed: False
#        isConv3:
#          regex: "conv3\\.conv.*"
#          epoch: 15
#          freezed: False

